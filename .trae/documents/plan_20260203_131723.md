I have analyzed the OpenClaw repository and compared it with the local Gitu codebase. OpenClaw uses a standalone **Gateway** architecture with the **Baileys** library, emphasizing robust session management, media handling, and audio transcription.

The local Gitu Assistant also uses **Baileys** (`whatsappAdapter.ts`) but lacks some key "smart" features that OpenClaw likely possesses, specifically **Audio Transcription** (Voice Notes) and **Full Media Sending** (Video/Documents). Currently, Gitu simply marks incoming audio as `[Audio]`, preventing the AI from understanding voice commands.

Here is the plan to "fix" and upgrade Gitu Assistant to match OpenClaw's capabilities:

### **Plan: Upgrade Gitu WhatsApp Integration**

#### **1. Implement Voice Note Transcription (Hearing)**
Enable the AI to "hear" voice notes sent by the user on WhatsApp.
*   **File**: `backend/src/adapters/whatsappAdapter.ts`
*   **Action**: Integrate `deepgramService` to transcribe incoming audio messages.
*   **Logic**: When an audio message is received, instead of setting text to `[Audio]`, send the buffer to Deepgram and use the transcribed text as the user's input.

#### **2. Enhance Media Sending Capabilities (Seeing & Sharing)**
Allow the AI to send Videos and Documents, not just Text and Images.
*   **File**: `backend/src/adapters/whatsappAdapter.ts`
*   **Action**: Update `sendMessage` method to support `video` and `document` payloads compatible with Baileys.
*   **File**: `backend/src/services/messagingMCPTools.ts`
*   **Action**: Update the `send_whatsapp` MCP tool schema to accept `video` and `document` arguments so agents can use them.

#### **3. Improve Security & UX**
Match OpenClaw's "Pairing" or "Explicit Allow" model more closely.
*   **File**: `backend/src/adapters/whatsappAdapter.ts`
*   **Action**: When an unknown user messages the bot, log a clear "Access Request" warning or send a polite "Access Denied" reply (configurable) instead of silently ignoring it, helping you manage permissions easier.

### **Verification**
*   **Voice Test**: You will be able to send a Voice Note to Gitu, and it will reply to the *content* of what you said.
*   **Media Test**: Ask Gitu to "send me a video of..." (if generated) or test the capability via the CLI.
